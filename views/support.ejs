<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/x-icon">
    <title>Trace Mc</title>
    <link rel="icon" type="image/png" href="media/favicon.png">
    <link rel="stylesheet" href="css/support.css">
  </head>

  <body>

    <div class="box">
      <h1 class="form_headline">Support Forum</h1>
      <form class="form_box" action="/support-send" method="post" novalidate="">
        <span class="two_block">
          <input type="text" name="mcName" id="mcName" required="" pattern="[a-zA-Z]{3,12}" placeholder="Minecraft Username *">
          <input type="text" name="dcName" id="dcName" placeholder="Discord Username">
        </span>
        <input type="email" name="email" id="email" required="" placeholder="Email *">
        <span class="two_block t2">
          <span class="country">
            <div class="type_selector">
              <span class="selected">
                <p>Support type *</p>
              </span>
              <img id="options-image" src="media/svg/arrow2.svg" alt="">
            </div>
            <div class="options-mask option-mask-hidden">
              <div class="options">
                <span class="option" data-value="home"><img class="opi" src="media/svg/home.svg" alt="">
                  <p class="opi-p">General Support</p>
                </span>
                <span class="option" data-value="home"><img class="opi" src="media/svg/home.svg" alt="">
                  <p class="opi-p">Buy Support</p>
                </span>
                <span class="option" data-value="pro"><img class="opi" src="media/svg/status.svg" alt="">
                  <p class="opi-p">Bug Report</p>
                </span>
                <span class="option" data-value="pro"><img class="opi" src="media/svg/status.svg" alt="">
                  <p class="opi-p">Suggestion</p>
                </span>
              </div>
            </div>
          </span>
          <input hidden="" type="text" name="c" id="c">
          <input type="text" id="topic" name="topic" pattern="[0-9]{10, 13}" placeholder="Topic">
        </span>
        <textarea name="Description" id="desc" rows="5" placeholder="Description *" required="" pattern="[a-zA-Z0-9]{3,12}"></textarea>
      </form>
      <button class="form_submit" onclick="submit_form()">Submit form</button>
      <p class="form_more"></p>
    </div>
    <div class="error_box hidden">
      <img src="media/svg/error.svg" alt="">
      <p id="error_msg">Something went wrong</p>
    </div>
    <script>
      function close() {
        setTimeout(() => {
          box.classList.add("hidden");
        }, 2000);
      }
      const error = document.getElementById("error_msg"); // use getElementById instead
      const box = document.querySelector(".error_box"); // use querySelector instead
      function open1() {
        document
          .querySelector("#options-image")
          .setAttribute("style", "Rotate:-90deg");
        document
          .querySelector(".options-mask")
          .classList.remove("option-mask-hidden");
      }

      function close1() {
        document
          .querySelector("#options-image")
          .setAttribute("style", "Rotate:90deg");
        document
          .querySelector(".options-mask")
          .classList.add("option-mask-hidden");
      }

      function select_options() {
        let value = document.querySelector(".options-mask").classList;
        let yes = value.value.indexOf("option-mask-hidden");
        if (yes == -1) {
          close1();
        } else {
          open1();
        }
      }
      document.querySelector(".options-mask").addEventListener("Click", () => {
        close1();
      });
      let options = document.querySelectorAll(".option");
      options.forEach((e) => {
        e.addEventListener("click", () => {
          let a = e.innerHTML;
          const ca = e.getAttribute("data-value");
          document.querySelector("#c").setAttribute("value", ca);
          console.log(ca);
          document.querySelector(".selected").innerHTML = a;
        });
      });
      document.querySelector(".country").addEventListener("click", () => {
        select_options();
      });

      function submit_form() {
        const mcName = document.getElementById("mcName").value;
        const email = document.getElementById("email").value;
        const category = document.querySelector("#c").value;
        const detail = document.getElementById("desc").value

        if (!mcName) {
          error.innerText = "Minecarft username is required";
          box.classList.remove("hidden");
          close();
        } else if (mcName.length < 3) {
          error.innerText = "Username is too short";
          box.classList.remove("hidden");
          close();
        } else if (!email) {
          error.innerText = "Email is required";
          box.classList.remove("hidden");
          close();
        } else if (email.indexOf("@") === -1 || email.indexOf(".") === -1) {
          error.innerText = "Email is not valid";
          box.classList.remove("hidden");
          close();
        } else if (!category) {
          error.innerText = "Category is required";
          box.classList.remove("hidden");
          close();
        } else if (!detail) {
          error.innerText = "Details are required";
          box.classList.remove("hidden");
          close();
        } else {
          document.querySelector(".form_box").submit();
        }
      }
    </script>
  
